
/*
 * JQuery zTree core v3.5.17-beta.2
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2014-05-08
 */(function(y){var G={},H={},E={},w={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",headers:{},url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},g=[function(n){var d=n.treeObj,b=p.event;d.bind(b.NODECREATED,function(d,b,a){f.apply(n.callback.onNodeCreated,[d,b,a])});d.bind(b.CLICK,function(d,b,a,M,c){f.apply(n.callback.onClick,[b,a,M,c])});d.bind(b.EXPAND,function(d,b,a){f.apply(n.callback.onExpand,[d,b,a])});d.bind(b.COLLAPSE,function(d,b,a){f.apply(n.callback.onCollapse,[d,b,a])});d.bind(b.ASYNC_SUCCESS,function(d,b,a,M){f.apply(n.callback.onAsyncSuccess,[d,b,a,M])});d.bind(b.ASYNC_ERROR,function(d,b,a,M,c,e){f.apply(n.callback.onAsyncError,[d,b,a,M,c,e])});d.bind(b.REMOVE,function(d,b,a){f.apply(n.callback.onRemove,[d,b,a])})}],q=[function(n){var d=p.event;n.treeObj.unbind(d.NODECREATED).unbind(d.CLICK).unbind(d.EXPAND).unbind(d.COLLAPSE).unbind(d.ASYNC_SUCCESS).unbind(d.ASYNC_ERROR).unbind(d.REMOVE)}],t=[function(n){var d=b.getCache(n);d||(d={},b.setCache(n,d));d.nodes=[];d.doms=[]}],r=[function(n,d,a,h,c,e,l){if(a){l=b.getRoot(n);var k=n.data.key.children;a.level=d;a.tId=n.treeId+"_"+ ++l.zId;a.parentTId=h?h.tId:null;a.open="string"==typeof a.open?f.eqs(a.open,"true"):!!a.open;a[k]&&0<a[k].length?(a.isParent=!0,a.zAsync=!0):(a.isParent="string"==typeof a.isParent?f.eqs(a.isParent,"true"):!!a.isParent,a.open=a.isParent&&!n.async.enable?a.open:!1,a.zAsync=!a.isParent);a.isFirstNode=c;a.isLastNode=e;a.getParentNode=function(){return b.getNodeCache(n,a.parentTId)};a.getPreNode=function(){return b.getPreNode(n,a)};a.getNextNode=function(){return b.getNextNode(n,a)};a.isAjaxing=!1;b.fixPIdKeyValue(n,a)}}],u=[function(n){var d=n.target,a=b.getSetting(n.data.treeId),h="",c=null,e="",l="",m=null,g=null,q=null;if(f.eqs(n.type,"mousedown"))l="mousedown";else if(f.eqs(n.type,"mouseup"))l="mouseup";else if(f.eqs(n.type,"contextmenu"))l="contextmenu";else if(f.eqs(n.type,"click"))if(f.eqs(d.tagName,"span")&&null!==d.getAttribute("treeNode"+p.id.SWITCH))h=f.getNodeMainDom(d).id,e="switchNode";else{if(q=f.getMDom(a,d,[{tagName:"a",attrName:"treeNode"+p.id.A}]))h=f.getNodeMainDom(q).id,e="clickNode"}else f.eqs(n.type,"dblclick")&&(l="dblclick",q=f.getMDom(a,d,[{tagName:"a",attrName:"treeNode"+p.id.A}]))&&(h=f.getNodeMainDom(q).id,e="switchNode");0<l.length&&0==h.length&&(q=f.getMDom(a,d,[{tagName:"a",attrName:"treeNode"+p.id.A}]))&&(h=f.getNodeMainDom(q).id);if(0<h.length)switch(c=b.getNodeCache(a,h),e){case "switchNode":c.isParent?f.eqs(n.type,"click")||f.eqs(n.type,"dblclick")&&f.apply(a.view.dblClickExpand,[a.treeId,c],a.view.dblClickExpand)?m=k.onSwitchNode:e="":e="";break;case "clickNode":m=k.onClickNode}switch(l){case "mousedown":g=k.onZTreeMousedown;break;case "mouseup":g=k.onZTreeMouseup;break;case "dblclick":g=k.onZTreeDblclick;break;case "contextmenu":g=k.onZTreeContextmenu}return{stop:!1,node:c,nodeEventType:e,nodeEventCallback:m,treeEventType:l,treeEventCallback:g}}],B=[function(n){var d=b.getRoot(n);d||(d={},b.setRoot(n,d));d[n.data.key.children]=[];d.expandTriggerFlag=!1;d.curSelectedList=[];d.noSelection=!0;d.createdNodes=[];d.zId=0;d._ver=(new Date).getTime()}],L=[],J=[],K=[],m=[],a=[],b={addNodeCache:function(n,d){b.getCache(n).nodes[b.getNodeCacheId(d.tId)]=d},getNodeCacheId:function(n){return n.substring(n.lastIndexOf("_")+1)},addAfterA:function(n){J.push(n)},addBeforeA:function(n){L.push(n)},addInnerAfterA:function(n){m.push(n)},addInnerBeforeA:function(n){K.push(n)},addInitBind:function(n){g.push(n)},addInitUnBind:function(n){q.push(n)},addInitCache:function(n){t.push(n)},addInitNode:function(n){r.push(n)},addInitProxy:function(n,d){d?u.splice(0,0,n):u.push(n)},addInitRoot:function(n){B.push(n)},addNodesData:function(n,d,a){var b=n.data.key.children;d[b]||(d[b]=[]);0<d[b].length&&(d[b][d[b].length-1].isLastNode=!1,e.setNodeLineIcos(n,d[b][d[b].length-1]));d.isParent=!0;d[b]=d[b].concat(a)},addSelectedNode:function(n,d){var a=b.getRoot(n);b.isSelectedNode(n,d)||a.curSelectedList.push(d)},addCreatedNode:function(n,d){(n.callback.onNodeCreated||n.view.addDiyDom)&&b.getRoot(n).createdNodes.push(d)},addZTreeTools:function(n){a.push(n)},exSetting:function(n){y.extend(!0,w,n)},fixPIdKeyValue:function(n,d){n.data.simpleData.enable&&(d[n.data.simpleData.pIdKey]=d.parentTId?d.getParentNode()[n.data.simpleData.idKey]:n.data.simpleData.rootPId)},getAfterA:function(n,d,a){for(var b=0,c=J.length;b<c;b++)J[b].apply(this,arguments)},getBeforeA:function(n,d,a){for(var b=0,c=L.length;b<c;b++)L[b].apply(this,arguments)},getInnerAfterA:function(n,d,b){for(var a=0,c=m.length;a<c;a++)m[a].apply(this,arguments)},getInnerBeforeA:function(n,d,a){for(var b=0,c=K.length;b<c;b++)K[b].apply(this,arguments)},getCache:function(n){return E[n.treeId]},getNextNode:function(n,d){if(!d)return null;for(var a=n.data.key.children,h=d.parentTId?d.getParentNode():b.getRoot(n),c=0,e=h[a].length-1;c<=e;c++)if(h[a][c]===d)return c==e?null:h[a][c+1];return null},getNodeByParam:function(n,d,a,c){if(!d||!a)return null;for(var A=n.data.key.children,e=0,f=d.length;e<f;e++){if(d[e][a]==c)return d[e];var l=b.getNodeByParam(n,d[e][A],a,c);if(l)return l}return null},getNodeCache:function(n,d){if(!d)return null;var a=E[n.treeId].nodes[b.getNodeCacheId(d)];return a?a:null},getNodeName:function(n,d){return""+d[n.data.key.name]},getNodeTitle:function(n,d){return""+d[""===n.data.key.title?n.data.key.name:n.data.key.title]},getNodes:function(n){return b.getRoot(n)[n.data.key.children]},getNodesByParam:function(n,d,a,c){if(!d||!a)return[];for(var A=n.data.key.children,e=[],f=0,l=d.length;f<l;f++)d[f][a]==c&&e.push(d[f]),e=e.concat(b.getNodesByParam(n,d[f][A],a,c));return e},getNodesByParamFuzzy:function(n,d,a,c){if(!d||!a)return[];var A=n.data.key.children,e=[];c=c.toLowerCase();for(var f=0,l=d.length;f<l;f++)"string"==typeof d[f][a]&&-1<d[f][a].toLowerCase().indexOf(c)&&e.push(d[f]),e=e.concat(b.getNodesByParamFuzzy(n,d[f][A],a,c));return e},getNodesByFilter:function(n,d,a,c,A){if(!d)return c?null:[];for(var e=n.data.key.children,l=c?null:[],k=0,p=d.length;k<p;k++){if(f.apply(a,[d[k],A],!1)){if(c)return d[k];l.push(d[k])}var m=b.getNodesByFilter(n,d[k][e],a,c,A);if(c&&m)return m;l=c?m:l.concat(m)}return l},getPreNode:function(n,d){if(!d)return null;for(var a=n.data.key.children,c=d.parentTId?d.getParentNode():b.getRoot(n),A=0,e=c[a].length;A<e;A++)if(c[a][A]===d)return 0==A?null:c[a][A-1];return null},getRoot:function(n){return n?H[n.treeId]:null},getRoots:function(){return H},getSetting:function(n){return G[n]},getSettings:function(){return G},getZTreeTools:function(n){return(n=this.getRoot(this.getSetting(n)))?n.treeTools:null},initCache:function(n){for(var d=0,a=t.length;d<a;d++)t[d].apply(this,arguments)},initNode:function(n,d,a,b,c,e){for(var f=0,l=r.length;f<l;f++)r[f].apply(this,arguments)},initRoot:function(n){for(var d=0,a=B.length;d<a;d++)B[d].apply(this,arguments)},isSelectedNode:function(n,d){for(var a=b.getRoot(n),c=0,e=a.curSelectedList.length;c<e;c++)if(d===a.curSelectedList[c])return!0;return!1},removeNodeCache:function(n,d){var a=n.data.key.children;if(d[a])for(var c=0,e=d[a].length;c<e;c++)arguments.callee(n,d[a][c]);b.getCache(n).nodes[b.getNodeCacheId(d.tId)]=null},removeSelectedNode:function(n,d){for(var a=b.getRoot(n),c=0,e=a.curSelectedList.length;c<e;c++)d!==a.curSelectedList[c]&&b.getNodeCache(n,a.curSelectedList[c].tId)||(a.curSelectedList.splice(c,1),c--,e--)},setCache:function(a,d){E[a.treeId]=d},setRoot:function(a,d){H[a.treeId]=d},setZTreeTools:function(n,d){for(var b=0,c=a.length;b<c;b++)a[b].apply(this,arguments)},transformToArrayFormat:function(a,d){if(!d)return[];var c=a.data.key.children,h=[];if(f.isArray(d))for(var e=0,l=d.length;e<l;e++)h.push(d[e]),d[e][c]&&(h=h.concat(b.transformToArrayFormat(a,d[e][c])));else h.push(d),d[c]&&(h=h.concat(b.transformToArrayFormat(a,d[c])));return h},transformTozTreeFormat:function(a,d){var b,c,e=a.data.simpleData.idKey,l=a.data.simpleData.pIdKey,k=a.data.key.children;if(!e||""==e||!d)return[];if(f.isArray(d)){var m=[],p=[];b=0;for(c=d.length;b<c;b++)p[d[b][e]]=d[b];b=0;for(c=d.length;b<c;b++)p[d[b][l]]&&d[b][e]!=d[b][l]?(p[d[b][l]][k]||(p[d[b][l]][k]=[]),p[d[b][l]][k].push(d[b])):m.push(d[b]);return m}return[d]}},c={bindEvent:function(a){for(var d=0,b=g.length;d<b;d++)g[d].apply(this,arguments)},unbindEvent:function(a){for(var d=0,b=q.length;d<b;d++)q[d].apply(this,arguments)},bindTree:function(a){var d={treeId:a.treeId},b=a.treeObj;a.view.txtSelectedEnable||b.bind("selectstart",function(a){a=a.originalEvent.srcElement.nodeName.toLowerCase();return"input"===a||"textarea"===a}).css({"-moz-user-select":"-moz-none"});b.bind("click",d,c.proxy);b.bind("dblclick",d,c.proxy);b.bind("mouseover",d,c.proxy);b.bind("mouseout",d,c.proxy);b.bind("mousedown",d,c.proxy);b.bind("mouseup",d,c.proxy);b.bind("contextmenu",d,c.proxy)},unbindTree:function(a){a.treeObj.unbind("click",c.proxy).unbind("dblclick",c.proxy).unbind("mouseover",c.proxy).unbind("mouseout",c.proxy).unbind("mousedown",c.proxy).unbind("mouseup",c.proxy).unbind("contextmenu",c.proxy)},doProxy:function(a){for(var d=[],b=0,c=u.length;b<c;b++){var e=u[b].apply(this,arguments);d.push(e);if(e.stop)break}return d},proxy:function(a){var d=b.getSetting(a.data.treeId);if(!f.uCanDo(d,a))return!0;for(var d=c.doProxy(a),e=!0,h=0,l=d.length;h<l;h++){var k=d[h];k.nodeEventCallback&&(e=k.nodeEventCallback.apply(k,[a,k.node])&&e);k.treeEventCallback&&(e=k.treeEventCallback.apply(k,[a,k.node])&&e)}return e}},k={onSwitchNode:function(a,d){var c=b.getSetting(a.data.treeId);if(d.open){if(0==f.apply(c.callback.beforeCollapse,[c.treeId,d],!0))return!0}else if(0==f.apply(c.callback.beforeExpand,[c.treeId,d],!0))return!0;b.getRoot(c).expandTriggerFlag=!0;e.switchNode(c,d);return!0},onClickNode:function(a,d){var c=b.getSetting(a.data.treeId),h=c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&b.isSelectedNode(c,d)?0:c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&c.view.selectedMulti?2:1;if(0==f.apply(c.callback.beforeClick,[c.treeId,d,h],!0))return!0;0===h?e.cancelPreSelectedNode(c,d):e.selectNode(c,d,2===h);c.treeObj.trigger(p.event.CLICK,[a,c.treeId,d,h]);return!0},onZTreeMousedown:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeMouseDown,[c.treeId,d],!0)&&f.apply(c.callback.onMouseDown,[a,c.treeId,d]);return!0},onZTreeMouseup:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeMouseUp,[c.treeId,d],!0)&&f.apply(c.callback.onMouseUp,[a,c.treeId,d]);return!0},onZTreeDblclick:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeDblClick,[c.treeId,d],!0)&&f.apply(c.callback.onDblClick,[a,c.treeId,d]);return!0},onZTreeContextmenu:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeRightClick,[c.treeId,d],!0)&&f.apply(c.callback.onRightClick,[a,c.treeId,d]);return"function"!=typeof c.callback.onRightClick}},f={apply:function(a,d,b){return"function"==typeof a?a.apply(x,d?d:[]):b},canAsync:function(a,d){var b=a.data.key.children;return a.async.enable&&d&&d.isParent&&!(d.zAsync||d[b]&&0<d[b].length)},clone:function(a){if(null===a)return null;var d=f.isArray(a)?[]:{},b;for(b in a)d[b]=a[b]instanceof Date?new Date(a[b].getTime()):"object"===typeof a[b]?arguments.callee(a[b]):a[b];return d},eqs:function(a,d){return a.toLowerCase()===d.toLowerCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},$:function(a,d,b){d&&"string"!=typeof d&&(b=d,d="");return"string"==typeof a?y(a,b?b.treeObj.get(0).ownerDocument:null):y("#"+a.tId+d,b?b.treeObj:null)},getMDom:function(a,d,b){if(!d)return null;for(;d&&d.id!==a.treeId;){for(var c=0,e=b.length;d.tagName&&c<e;c++)if(f.eqs(d.tagName,b[c].tagName)&&null!==d.getAttribute(b[c].attrName))return d;d=d.parentNode}return null},getNodeMainDom:function(a){return y(a).parent("li").get(0)||y(a).parentsUntil("li").parent().get(0)},isChildOrSelf:function(a,b){return 0<y(a).closest("#"+b).length},uCanDo:function(a,b){return!0}},e={addNodes:function(a,d,c,h){if(!a.data.keep.leaf||!d||d.isParent)if(f.isArray(c)||(c=[c]),a.data.simpleData.enable&&(c=b.transformTozTreeFormat(a,c)),d){var A=l(d,p.id.SWITCH,a),k=l(d,p.id.ICON,a),m=l(d,p.id.UL,a);d.open||(e.replaceSwitchClass(d,A,p.folder.CLOSE),e.replaceIcoClass(d,k,p.folder.CLOSE),d.open=!1,m.css({display:"none"}));b.addNodesData(a,d,c);e.createNodes(a,d.level+1,c,d);h||e.expandCollapseParentNode(a,d,!0)}else b.addNodesData(a,b.getRoot(a),c),e.createNodes(a,0,c,null)},appendNodes:function(a,d,c,h,f,l){if(!c)return[];for(var k=[],m=a.data.key.children,p=0,q=c.length;p<q;p++){var g=c[p];if(f){var x=(h?h:b.getRoot(a))[m].length==c.length&&0==p;b.initNode(a,d,g,h,x,p==c.length-1,l);b.addNodeCache(a,g)}x=[];g[m]&&0<g[m].length&&(x=e.appendNodes(a,d+1,g[m],g,f,l&&g.open));l&&(e.makeDOMNodeMainBefore(k,a,g),e.makeDOMNodeLine(k,a,g),b.getBeforeA(a,g,k),e.makeDOMNodeNameBefore(k,a,g),b.getInnerBeforeA(a,g,k),e.makeDOMNodeIcon(k,a,g),b.getInnerAfterA(a,g,k),e.makeDOMNodeNameAfter(k,a,g),b.getAfterA(a,g,k),g.isParent&&g.open&&e.makeUlHtml(a,g,k,x.join("")),e.makeDOMNodeMainAfter(k,a,g),b.addCreatedNode(a,g))}return k},appendParentULDom:function(a,b){var c=[],h=l(b,a);!h.get(0)&&b.parentTId&&(e.appendParentULDom(a,b.getParentNode()),h=l(b,a));var f=l(b,p.id.UL,a);f.get(0)&&f.remove();f=e.appendNodes(a,b.level+1,b[a.data.key.children],b,!1,!0);e.makeUlHtml(a,b,c,f.join(""));h.append(c.join(""))},asyncNode:function(a,d,c,h){var k,m;if(d&&!d.isParent)return f.apply(h),!1;if(d&&d.isAjaxing)return!1;if(0==f.apply(a.callback.beforeAsync,[a.treeId,d],!0))return f.apply(h),!1;d&&(d.isAjaxing=!0,l(d,p.id.ICON,a).attr({style:"","class":p.className.BUTTON+" "+p.className.ICO_LOADING}));var g={};k=0;for(m=a.async.autoParam.length;d&&k<m;k++){var q=a.async.autoParam[k].split("\x3d"),x=q;1<q.length&&(x=q[1],q=q[0]);g[x]=d[q]}if(f.isArray(a.async.otherParam))for(k=0,m=a.async.otherParam.length;k<m;k+=2)g[a.async.otherParam[k]]=a.async.otherParam[k+1];else for(var r in a.async.otherParam)g[r]=a.async.otherParam[r];var t=b.getRoot(a)._ver;y.ajax({contentType:a.async.contentType,type:a.async.type,headers:a.async.headers,url:f.apply(a.async.url,[a.treeId,d],a.async.url),data:g,dataType:a.async.dataType,success:function(k){if(t==b.getRoot(a)._ver){var l=[];try{l=k&&0!=k.length?"string"==typeof k?eval("("+k+")"):k:[]}catch(A){l=k}d&&(d.isAjaxing=null,d.zAsync=!0);e.setNodeLineIcos(a,d);l&&""!==l?(l=f.apply(a.async.dataFilter,[a.treeId,d,l],l),e.addNodes(a,d,l?f.clone(l):[],!!c)):e.addNodes(a,d,[],!!c);a.treeObj.trigger(p.event.ASYNC_SUCCESS,[a.treeId,d,k]);f.apply(h)}},error:function(c,h,l){t==b.getRoot(a)._ver&&(d&&(d.isAjaxing=null),e.setNodeLineIcos(a,d),a.treeObj.trigger(p.event.ASYNC_ERROR,[a.treeId,d,c,h,l]))}});return!0},cancelPreSelectedNode:function(a,d){for(var c=b.getRoot(a).curSelectedList,h=c.length-1;0<=h;h--)if(!d||d===c[h])if(l(c[h],p.id.A,a).removeClass(p.node.CURSELECTED),d){b.removeSelectedNode(a,d);break}d||(b.getRoot(a).curSelectedList=[])},createNodeCallback:function(a){if(a.callback.onNodeCreated||a.view.addDiyDom)for(var d=b.getRoot(a);0<d.createdNodes.length;){var c=d.createdNodes.shift();f.apply(a.view.addDiyDom,[a.treeId,c]);a.callback.onNodeCreated&&a.treeObj.trigger(p.event.NODECREATED,[a.treeId,c])}},createNodes:function(a,d,c,h){if(c&&0!=c.length){var k=b.getRoot(a),f=a.data.key.children,f=!h||h.open||!!l(h[f][0],a).get(0);k.createdNodes=[];d=e.appendNodes(a,d,c,h,!0,f);h?(h=l(h,p.id.UL,a),h.get(0)&&h.append(d.join(""))):a.treeObj.append(d.join(""));e.createNodeCallback(a)}},destroy:function(a){a&&(b.initCache(a),b.initRoot(a),c.unbindTree(a),c.unbindEvent(a),a.treeObj.empty(),delete G[a.treeId])},expandCollapseNode:function(a,d,c,h,k){var m=b.getRoot(a),g=a.data.key.children;if(d){if(m.expandTriggerFlag){var q=k;k=function(){q&&q();d.open?a.treeObj.trigger(p.event.EXPAND,[a.treeId,d]):a.treeObj.trigger(p.event.COLLAPSE,[a.treeId,d])};m.expandTriggerFlag=!1}!d.open&&d.isParent&&(!l(d,p.id.UL,a).get(0)||d[g]&&0<d[g].length&&!l(d[g][0],a).get(0))&&(e.appendParentULDom(a,d),e.createNodeCallback(a));if(d.open==c)f.apply(k,[]);else{c=l(d,p.id.UL,a);var m=l(d,p.id.SWITCH,a),x=l(d,p.id.ICON,a);d.isParent?(d.open=!d.open,d.iconOpen&&d.iconClose&&x.attr("style",e.makeNodeIcoStyle(a,d)),d.open?(e.replaceSwitchClass(d,m,p.folder.OPEN),e.replaceIcoClass(d,x,p.folder.OPEN),0==h||""==a.view.expandSpeed?(c.show(),f.apply(k,[])):d[g]&&0<d[g].length?c.slideDown(a.view.expandSpeed,k):(c.show(),f.apply(k,[]))):(e.replaceSwitchClass(d,m,p.folder.CLOSE),e.replaceIcoClass(d,x,p.folder.CLOSE),0!=h&&""!=a.view.expandSpeed&&d[g]&&0<d[g].length?c.slideUp(a.view.expandSpeed,k):(c.hide(),f.apply(k,[])))):f.apply(k,[])}}else f.apply(k,[])},expandCollapseParentNode:function(a,b,c,h,k){b&&(b.parentTId?(e.expandCollapseNode(a,b,c,h),b.parentTId&&e.expandCollapseParentNode(a,b.getParentNode(),c,h,k)):e.expandCollapseNode(a,b,c,h,k))},expandCollapseSonNode:function(a,d,c,h,k){var l=b.getRoot(a),f=a.data.key.children,l=d?d[f]:l[f],f=d?!1:h,m=b.getRoot(a).expandTriggerFlag;b.getRoot(a).expandTriggerFlag=!1;if(l)for(var p=0,g=l.length;p<g;p++)l[p]&&e.expandCollapseSonNode(a,l[p],c,f);b.getRoot(a).expandTriggerFlag=m;e.expandCollapseNode(a,d,c,h,k)},makeDOMNodeIcon:function(a,d,c){var h=b.getNodeName(d,c),h=d.view.nameIsHTML?h:h.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");a.push("\x3cspan id\x3d'",c.tId,p.id.ICON,"' title\x3d'' treeNode",p.id.ICON," class\x3d'",e.makeNodeIcoClass(d,c),"' style\x3d'",e.makeNodeIcoStyle(d,c),"'\x3e\x3c/span\x3e\x3cspan id\x3d'",c.tId,p.id.SPAN,"'\x3e",h,"\x3c/span\x3e")},makeDOMNodeLine:function(a,b,c){a.push("\x3cspan id\x3d'",c.tId,p.id.SWITCH,"' title\x3d'' class\x3d'",e.makeNodeLineClass(b,c),"' treeNode",p.id.SWITCH,"\x3e\x3c/span\x3e")},makeDOMNodeMainAfter:function(a,b,c){a.push("\x3c/li\x3e")},makeDOMNodeMainBefore:function(a,b,c){a.push("\x3cli id\x3d'",c.tId,"' class\x3d'",p.className.LEVEL,c.level,"' tabindex\x3d'0' hidefocus\x3d'true' treenode\x3e")},makeDOMNodeNameAfter:function(a,b,c){a.push("\x3c/a\x3e")},makeDOMNodeNameBefore:function(a,d,c){var h=b.getNodeTitle(d,c),k=e.makeNodeUrl(d,c),l=e.makeNodeFontCss(d,c),m=[],g;for(g in l)m.push(g,":",l[g],";");a.push("\x3ca id\x3d'",c.tId,p.id.A,"' class\x3d'",p.className.LEVEL,c.level,"' treeNode",p.id.A,' onclick\x3d"',c.click||"",'" ',null!=k&&0<k.length?"href\x3d'"+k+"'":""," target\x3d'",e.makeNodeTarget(c),"' style\x3d'",m.join(""),"'");f.apply(d.view.showTitle,[d.treeId,c],d.view.showTitle)&&h&&a.push("title\x3d'",h.replace(/'/g,"\x26#39;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),"'");a.push("\x3e")},makeNodeFontCss:function(a,b){var c=f.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(a,b){var c=["ico"];b.isAjaxing||(c[0]=(b.iconSkin?b.iconSkin+"_":"")+c[0],b.isParent?c.push(b.open?p.folder.OPEN:p.folder.CLOSE):c.push(p.folder.DOCU));return p.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(a,b){var c=[];if(!b.isAjaxing){var h=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b.icon;h&&c.push("background:url(",h,") 0 0 no-repeat;");0!=a.view.showIcon&&f.apply(a.view.showIcon,[a.treeId,b],!0)||c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(a,b){var c=[];a.view.showLine?0==b.level&&b.isFirstNode&&b.isLastNode?c.push(p.line.ROOT):0==b.level&&b.isFirstNode?c.push(p.line.ROOTS):b.isLastNode?c.push(p.line.BOTTOM):c.push(p.line.CENTER):c.push(p.line.NOLINE);b.isParent?c.push(b.open?p.folder.OPEN:p.folder.CLOSE):c.push(p.folder.DOCU);return e.makeNodeLineClassEx(b)+c.join("_")},makeNodeLineClassEx:function(a){return p.className.BUTTON+" "+p.className.LEVEL+a.level+" "+p.className.SWITCH+" "},makeNodeTarget:function(a){return a.target||"_blank"},makeNodeUrl:function(a,b){var c=a.data.key.url;return b[c]?b[c]:null},makeUlHtml:function(a,b,c,h){c.push("\x3cul id\x3d'",b.tId,p.id.UL,"' class\x3d'",p.className.LEVEL,b.level," ",e.makeUlLineClass(a,b),"' style\x3d'display:",b.open?"block":"none","'\x3e");c.push(h);c.push("\x3c/ul\x3e")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?p.line.LINE:""},removeChildNodes:function(a,c){if(c){var k=a.data.key.children,h=c[k];if(h){for(var f=0,m=h.length;f<m;f++)b.removeNodeCache(a,h[f]);b.removeSelectedNode(a);delete c[k];a.data.keep.parent?l(c,p.id.UL,a).empty():(c.isParent=!1,c.open=!1,k=l(c,p.id.SWITCH,a),h=l(c,p.id.ICON,a),e.replaceSwitchClass(c,k,p.folder.DOCU),e.replaceIcoClass(c,h,p.folder.DOCU),l(c,p.id.UL,a).remove())}}},setFirstNode:function(a,b){var c=a.data.key.children;0<b[c].length&&(b[c][0].isFirstNode=!0)},setLastNode:function(a,b){var c=a.data.key.children,h=b[c].length;0<h&&(b[c][h-1].isLastNode=!0)},removeNode:function(a,c){var k=b.getRoot(a),h=a.data.key.children,f=c.parentTId?c.getParentNode():k;c.isFirstNode=!1;c.isLastNode=!1;c.getPreNode=function(){return null};c.getNextNode=function(){return null};if(b.getNodeCache(a,c.tId)){l(c,a).remove();b.removeNodeCache(a,c);b.removeSelectedNode(a,c);for(var m=0,g=f[h].length;m<g;m++)if(f[h][m].tId==c.tId){f[h].splice(m,1);break}e.setFirstNode(a,f);e.setLastNode(a,f);var q,m=f[h].length;if(!a.data.keep.parent&&0==m)f.isParent=!1,f.open=!1,m=l(f,p.id.UL,a),g=l(f,p.id.SWITCH,a),q=l(f,p.id.ICON,a),e.replaceSwitchClass(f,g,p.folder.DOCU),e.replaceIcoClass(f,q,p.folder.DOCU),m.css("display","none");else if(a.view.showLine&&0<m){var x=f[h][m-1],m=l(x,p.id.UL,a),g=l(x,p.id.SWITCH,a);q=l(x,p.id.ICON,a);f==k?1==f[h].length?e.replaceSwitchClass(x,g,p.line.ROOT):(k=l(f[h][0],p.id.SWITCH,a),e.replaceSwitchClass(f[h][0],k,p.line.ROOTS),e.replaceSwitchClass(x,g,p.line.BOTTOM)):e.replaceSwitchClass(x,g,p.line.BOTTOM);m.removeClass(p.line.LINE)}}},replaceIcoClass:function(a,b,c){if(b&&!a.isAjaxing&&(a=b.attr("class"),void 0!=a)){a=a.split("_");switch(c){case p.folder.OPEN:case p.folder.CLOSE:case p.folder.DOCU:a[a.length-1]=c}b.attr("class",a.join("_"))}},replaceSwitchClass:function(a,b,c){if(b){var h=b.attr("class");if(void 0!=h){h=h.split("_");switch(c){case p.line.ROOT:case p.line.ROOTS:case p.line.CENTER:case p.line.BOTTOM:case p.line.NOLINE:h[0]=e.makeNodeLineClassEx(a)+c;break;case p.folder.OPEN:case p.folder.CLOSE:case p.folder.DOCU:h[1]=c}b.attr("class",h.join("_"));c!==p.folder.DOCU?b.removeAttr("disabled"):b.attr("disabled","disabled")}}},selectNode:function(a,c,k){k||e.cancelPreSelectedNode(a);l(c,p.id.A,a).addClass(p.node.CURSELECTED);b.addSelectedNode(a,c)},setNodeFontCss:function(a,b){var c=l(b,p.id.A,a),h=e.makeNodeFontCss(a,b);h&&c.css(h)},setNodeLineIcos:function(a,b){if(b){var c=l(b,p.id.SWITCH,a),h=l(b,p.id.UL,a),k=l(b,p.id.ICON,a),f=e.makeUlLineClass(a,b);0==f.length?h.removeClass(p.line.LINE):h.addClass(f);c.attr("class",e.makeNodeLineClass(a,b));b.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled");k.removeAttr("style");k.attr("style",e.makeNodeIcoStyle(a,b));k.attr("class",e.makeNodeIcoClass(a,b))}},setNodeName:function(a,c){var k=b.getNodeTitle(a,c),h=l(c,p.id.SPAN,a);h.empty();a.view.nameIsHTML?h.html(b.getNodeName(a,c)):h.text(b.getNodeName(a,c));f.apply(a.view.showTitle,[a.treeId,c],a.view.showTitle)&&l(c,p.id.A,a).attr("title",k?k:"")},setNodeTarget:function(a,b){l(b,p.id.A,a).attr("target",e.makeNodeTarget(b))},setNodeUrl:function(a,b){var c=l(b,p.id.A,a),h=e.makeNodeUrl(a,b);null==h||0==h.length?c.removeAttr("href"):c.attr("href",h)},switchNode:function(a,b){b.open||!f.canAsync(a,b)?e.expandCollapseNode(a,b,!b.open):a.async.enable?e.asyncNode(a,b)||e.expandCollapseNode(a,b,!b.open):b&&e.expandCollapseNode(a,b,!b.open)}};y.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:f,view:e,event:c,data:b},getZTreeObj:function(a){return(a=b.getZTreeTools(a))?a:null},destroy:function(a){if(a&&0<a.length)e.destroy(b.getSetting(a));else for(var c in G)e.destroy(G[c])},init:function(a,d,k){var h=f.clone(w);y.extend(!0,h,d);h.treeId=a.attr("id");h.treeObj=a;h.treeObj.empty();G[h.treeId]=h;"undefined"===typeof document.body.style.maxHeight&&(h.view.expandSpeed="");b.initRoot(h);a=b.getRoot(h);d=h.data.key.children;k=k?f.clone(f.isArray(k)?k:[k]):[];a[d]=h.data.simpleData.enable?b.transformTozTreeFormat(h,k):k;b.initCache(h);c.unbindTree(h);c.bindTree(h);c.unbindEvent(h);c.bindEvent(h);k={setting:h,addNodes:function(a,b,c){function d(){e.addNodes(h,a,k,1==c)}if(!b)return null;a||(a=null);if(a&&!a.isParent&&h.data.keep.leaf)return null;var k=f.clone(f.isArray(b)?b:[b]);f.canAsync(h,a)?e.asyncNode(h,a,c,d):d();return k},cancelSelectedNode:function(a){e.cancelPreSelectedNode(h,a)},destroy:function(){e.destroy(h)},expandAll:function(a){a=!!a;e.expandCollapseSonNode(h,null,a,!0);return a},expandNode:function(a,c,d,k,m){if(!a||!a.isParent)return null;!0!==c&&!1!==c&&(c=!a.open);if((m=!!m)&&c&&0==f.apply(h.callback.beforeExpand,[h.treeId,a],!0)||m&&!c&&0==f.apply(h.callback.beforeCollapse,[h.treeId,a],!0))return null;c&&a.parentTId&&e.expandCollapseParentNode(h,a.getParentNode(),c,!1);if(c===a.open&&!d)return null;b.getRoot(h).expandTriggerFlag=m;if(!f.canAsync(h,a)&&d)e.expandCollapseSonNode(h,a,c,!0,function(){if(!1!==k)try{l(a,h).focus().blur()}catch(b){}});else if(a.open=!c,e.switchNode(this.setting,a),!1!==k)try{l(a,h).focus().blur()}catch(n){}return c},getNodes:function(){return b.getNodes(h)},getNodeByParam:function(a,c,d){return a?b.getNodeByParam(h,d?d[h.data.key.children]:b.getNodes(h),a,c):null},getNodeByTId:function(a){return b.getNodeCache(h,a)},getNodesByParam:function(a,c,d){return a?b.getNodesByParam(h,d?d[h.data.key.children]:b.getNodes(h),a,c):null},getNodesByParamFuzzy:function(a,c,d){return a?b.getNodesByParamFuzzy(h,d?d[h.data.key.children]:b.getNodes(h),a,c):null},getNodesByFilter:function(a,c,d,k){c=!!c;return a&&"function"==typeof a?b.getNodesByFilter(h,d?d[h.data.key.children]:b.getNodes(h),a,c,k):c?null:[]},getNodeIndex:function(a){if(!a)return null;for(var c=h.data.key.children,d=a.parentTId?a.getParentNode():b.getRoot(h),k=0,e=d[c].length;k<e;k++)if(d[c][k]==a)return k;return-1},getSelectedNodes:function(){for(var a=[],c=b.getRoot(h).curSelectedList,d=0,k=c.length;d<k;d++)a.push(c[d]);return a},isSelectedNode:function(a){return b.isSelectedNode(h,a)},reAsyncChildNodes:function(a,c,d){if(this.setting.async.enable){var k=!a;k&&(a=b.getRoot(h));if("refresh"==c){c=this.setting.data.key.children;for(var f=0,m=a[c]?a[c].length:0;f<m;f++)b.removeNodeCache(h,a[c][f]);b.removeSelectedNode(h);a[c]=[];k?this.setting.treeObj.empty():l(a,p.id.UL,h).empty()}e.asyncNode(this.setting,k?null:a,!!d)}},refresh:function(){this.setting.treeObj.empty();var a=b.getRoot(h),c=a[h.data.key.children];b.initRoot(h);a[h.data.key.children]=c;b.initCache(h);e.createNodes(h,0,a[h.data.key.children])},removeChildNodes:function(a){if(!a)return null;var b=a[h.data.key.children];e.removeChildNodes(h,a);return b?b:null},removeNode:function(a,b){a&&(b=!!b,b&&0==f.apply(h.callback.beforeRemove,[h.treeId,a],!0)||(e.removeNode(h,a),b&&this.setting.treeObj.trigger(p.event.REMOVE,[h.treeId,a])))},selectNode:function(a,b){if(a&&f.uCanDo(h)){b=h.view.selectedMulti&&b;if(a.parentTId)e.expandCollapseParentNode(h,a.getParentNode(),!0,!1,function(){try{l(a,h).focus().blur()}catch(b){}});else try{l(a,h).focus().blur()}catch(c){}e.selectNode(h,a,b)}},transformTozTreeNodes:function(a){return b.transformTozTreeFormat(h,a)},transformToArray:function(a){return b.transformToArrayFormat(h,a)},updateNode:function(a,b){a&&l(a,h).get(0)&&f.uCanDo(h)&&(e.setNodeName(h,a),e.setNodeTarget(h,a),e.setNodeUrl(h,a),e.setNodeLineIcos(h,a),e.setNodeFontCss(h,a))}};a.treeTools=k;b.setZTreeTools(h,k);a[d]&&0<a[d].length?e.createNodes(h,0,a[d]):h.async.enable&&h.async.url&&""!==h.async.url&&e.asyncNode(h);return k}};var x=y.fn.zTree,l=f.$,p=x.consts})(jQuery);(function(y){var G={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},H={check:{enable:!1,autoCheckTrigger:!1,chkStyle:G.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:G.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},E=function(m,a){if(!0===a.chkDisabled)return!1;var b=u.getSetting(m.data.treeId),c=b.data.key.checked;if(0==q.apply(b.callback.beforeCheck,[b.treeId,a],!0))return!0;a[c]=!a[c];r.checkNodeRelation(b,a);c=B(a,t.id.CHECK,b);r.setChkClass(b,c,a);r.repairParentChkClassWithSelf(b,a);b.treeObj.trigger(t.event.CHECK,[m,b.treeId,a]);return!0},w=function(m,a){if(!0===a.chkDisabled)return!1;var b=u.getSetting(m.data.treeId),c=B(a,t.id.CHECK,b);a.check_Focus=!0;r.setChkClass(b,c,a);return!0},g=function(m,a){if(!0===a.chkDisabled)return!1;var b=u.getSetting(m.data.treeId),c=B(a,t.id.CHECK,b);a.check_Focus=!1;r.setChkClass(b,c,a);return!0};y.extend(!0,y.fn.zTree.consts,G);y.extend(!0,y.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(m,a){var b,c,k,f=m.data.key.children,e=m.data.key.checked;b=t.radio;if(m.check.chkStyle==b.STYLE){var g=u.getRadioCheckedList(m);if(a[e])if(m.check.radioType==b.TYPE_ALL){for(c=g.length-1;0<=c;c--)b=g[c],b[e]&&b!=a&&(b[e]=!1,g.splice(c,1),r.setChkClass(m,B(b,t.id.CHECK,m),b),b.parentTId!=a.parentTId&&r.repairParentChkClassWithSelf(m,b));g.push(a)}else for(g=a.parentTId?a.getParentNode():u.getRoot(m),c=0,k=g[f].length;c<k;c++)b=g[f][c],b[e]&&b!=a&&(b[e]=!1,r.setChkClass(m,B(b,t.id.CHECK,m),b));else if(m.check.radioType==b.TYPE_ALL)for(c=0,k=g.length;c<k;c++)if(a==g[c]){g.splice(c,1);break}}else a[e]&&(!a[f]||0==a[f].length||-1<m.check.chkboxType.Y.indexOf("s"))&&r.setSonNodeCheckBox(m,a,!0),a[e]||a[f]&&0!=a[f].length&&!(-1<m.check.chkboxType.N.indexOf("s"))||r.setSonNodeCheckBox(m,a,!1),a[e]&&-1<m.check.chkboxType.Y.indexOf("p")&&r.setParentNodeCheckBox(m,a,!0),!a[e]&&-1<m.check.chkboxType.N.indexOf("p")&&r.setParentNodeCheckBox(m,a,!1)},makeChkClass:function(m,a){var b=m.data.key.checked,c=t.checkbox,k=t.radio,f="",f=!0===a.chkDisabled?c.DISABLED:a.halfCheck?c.PART:m.check.chkStyle==k.STYLE?1>a.check_Child_State?c.FULL:c.PART:a[b]?2===a.check_Child_State||-1===a.check_Child_State?c.FULL:c.PART:1>a.check_Child_State?c.FULL:c.PART,b=m.check.chkStyle+"_"+(a[b]?c.TRUE:c.FALSE)+"_"+f,b=a.check_Focus&&!0!==a.chkDisabled?b+"_"+c.FOCUS:b;return t.className.BUTTON+" "+c.DEFAULT+" "+b},repairAllChk:function(m,a){if(m.check.enable&&m.check.chkStyle===t.checkbox.STYLE)for(var b=m.data.key.checked,c=m.data.key.children,k=u.getRoot(m),f=0,e=k[c].length;f<e;f++){var g=k[c][f];!0!==g.nocheck&&!0!==g.chkDisabled&&(g[b]=a);r.setSonNodeCheckBox(m,g,a)}},repairChkClass:function(m,a){if(a&&(u.makeChkFlag(m,a),!0!==a.nocheck)){var b=B(a,t.id.CHECK,m);r.setChkClass(m,b,a)}},repairParentChkClass:function(m,a){if(a&&a.parentTId){var b=a.getParentNode();r.repairChkClass(m,b);r.repairParentChkClass(m,b)}},repairParentChkClassWithSelf:function(m,a){if(a){var b=m.data.key.children;a[b]&&0<a[b].length?r.repairParentChkClass(m,a[b][0]):r.repairParentChkClass(m,a)}},repairSonChkDisabled:function(m,a,b,c){if(a){var k=m.data.key.children;a.chkDisabled!=b&&(a.chkDisabled=b);r.repairChkClass(m,a);if(a[k]&&c)for(var f=0,e=a[k].length;f<e;f++)r.repairSonChkDisabled(m,a[k][f],b,c)}},repairParentChkDisabled:function(m,a,b,c){a&&(a.chkDisabled!=b&&c&&(a.chkDisabled=b),r.repairChkClass(m,a),r.repairParentChkDisabled(m,a.getParentNode(),b,c))},setChkClass:function(m,a,b){a&&(!0===b.nocheck?a.hide():a.show(),a.attr("class",r.makeChkClass(m,b)))},setParentNodeCheckBox:function(m,a,b,c){var k=m.data.key.children,f=m.data.key.checked,e=B(a,t.id.CHECK,m);c||(c=a);u.makeChkFlag(m,a);!0!==a.nocheck&&!0!==a.chkDisabled&&(a[f]=b,r.setChkClass(m,e,a),m.check.autoCheckTrigger&&a!=c&&m.treeObj.trigger(t.event.CHECK,[null,m.treeId,a]));if(a.parentTId){e=!0;if(!b)for(var k=a.getParentNode()[k],g=0,l=k.length;g<l;g++)if(!0!==k[g].nocheck&&!0!==k[g].chkDisabled&&k[g][f]||(!0===k[g].nocheck||!0===k[g].chkDisabled)&&0<k[g].check_Child_State){e=!1;break}e&&r.setParentNodeCheckBox(m,a.getParentNode(),b,c)}},setSonNodeCheckBox:function(m,a,b,c){if(a){var k=m.data.key.children,f=m.data.key.checked,e=B(a,t.id.CHECK,m);c||(c=a);var g=!1;if(a[k])for(var l=0,p=a[k].length;l<p&&!0!==a.chkDisabled;l++){var n=a[k][l];r.setSonNodeCheckBox(m,n,b,c);!0===n.chkDisabled&&(g=!0)}a!=u.getRoot(m)&&!0!==a.chkDisabled&&(g&&!0!==a.nocheck&&u.makeChkFlag(m,a),!0!==a.nocheck&&!0!==a.chkDisabled?(a[f]=b,g||(a.check_Child_State=a[k]&&0<a[k].length?b?2:0:-1)):a.check_Child_State=-1,r.setChkClass(m,e,a),m.check.autoCheckTrigger&&a!=c&&!0!==a.nocheck&&!0!==a.chkDisabled&&m.treeObj.trigger(t.event.CHECK,[null,m.treeId,a]))}}},event:{},data:{getRadioCheckedList:function(m){for(var a=u.getRoot(m).radioCheckedList,b=0,c=a.length;b<c;b++)u.getNodeCache(m,a[b].tId)||(a.splice(b,1),b--,c--);return a},getCheckStatus:function(m,a){if(!m.check.enable||a.nocheck||a.chkDisabled)return null;var b=m.data.key.checked;return{checked:a[b],half:a.halfCheck?a.halfCheck:m.check.chkStyle==t.radio.STYLE?2===a.check_Child_State:a[b]?-1<a.check_Child_State&&2>a.check_Child_State:0<a.check_Child_State}},getTreeCheckedNodes:function(m,a,b,c){if(!a)return[];var k=m.data.key.children,f=m.data.key.checked,e=b&&m.check.chkStyle==t.radio.STYLE&&m.check.radioType==t.radio.TYPE_ALL;c=c?c:[];for(var g=0,l=a.length;g<l&&(!0===a[g].nocheck||!0===a[g].chkDisabled||a[g][f]!=b||(c.push(a[g]),!e))&&!(u.getTreeCheckedNodes(m,a[g][k],b,c),e&&0<c.length);g++);return c},getTreeChangeCheckedNodes:function(g,a,b){if(!a)return[];var c=g.data.key.children,k=g.data.key.checked;b=b?b:[];for(var f=0,e=a.length;f<e;f++)!0!==a[f].nocheck&&!0!==a[f].chkDisabled&&a[f][k]!=a[f].checkedOld&&b.push(a[f]),u.getTreeChangeCheckedNodes(g,a[f][c],b);return b},makeChkFlag:function(g,a){if(a){var b=g.data.key.children,c=g.data.key.checked,k=-1;if(a[b])for(var f=0,e=a[b].length;f<e;f++){var q=a[b][f],l=-1;if(g.check.chkStyle==t.radio.STYLE)if(l=!0===q.nocheck||!0===q.chkDisabled?q.check_Child_State:!0===q.halfCheck?2:q[c]?2:0<q.check_Child_State?2:0,2==l){k=2;break}else 0==l&&(k=0);else if(g.check.chkStyle==t.checkbox.STYLE)if(l=!0===q.nocheck||!0===q.chkDisabled?q.check_Child_State:!0===q.halfCheck?1:q[c]?-1===q.check_Child_State||2===q.check_Child_State?2:1:0<q.check_Child_State?1:0,1===l){k=1;break}else if(2===l&&-1<k&&0<f&&l!==k){k=1;break}else if(2===k&&-1<l&&2>l){k=1;break}else-1<l&&(k=l)}a.check_Child_State=k}}}});y=y.fn.zTree;var q=y._z.tools,t=y.consts,r=y._z.view,u=y._z.data,B=q.$;u.exSetting(H);u.addInitBind(function(g){g.treeObj.bind(t.event.CHECK,function(a,b,c,k){a.srcEvent=b;q.apply(g.callback.onCheck,[a,c,k])})});u.addInitUnBind(function(g){g.treeObj.unbind(t.event.CHECK)});u.addInitCache(function(g){});u.addInitNode(function(g,a,b,c,k,f,e){b&&(a=g.data.key.checked,"string"==typeof b[a]&&(b[a]=q.eqs(b[a],"true")),b[a]=!!b[a],b.checkedOld=b[a],"string"==typeof b.nocheck&&(b.nocheck=q.eqs(b.nocheck,"true")),b.nocheck=!!b.nocheck||g.check.nocheckInherit&&c&&!!c.nocheck,"string"==typeof b.chkDisabled&&(b.chkDisabled=q.eqs(b.chkDisabled,"true")),b.chkDisabled=!!b.chkDisabled||g.check.chkDisabledInherit&&c&&!!c.chkDisabled,"string"==typeof b.halfCheck&&(b.halfCheck=q.eqs(b.halfCheck,"true")),b.halfCheck=!!b.halfCheck,b.check_Child_State=-1,b.check_Focus=!1,b.getCheckStatus=function(){return u.getCheckStatus(g,b)},g.check.chkStyle==t.radio.STYLE&&g.check.radioType==t.radio.TYPE_ALL&&b[a]&&u.getRoot(g).radioCheckedList.push(b))});u.addInitProxy(function(m){var a=m.target,b=u.getSetting(m.data.treeId),c="",k=null,f="",e=null;q.eqs(m.type,"mouseover")?b.check.enable&&q.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+t.id.CHECK)&&(c=q.getNodeMainDom(a).id,f="mouseoverCheck"):q.eqs(m.type,"mouseout")?b.check.enable&&q.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+t.id.CHECK)&&(c=q.getNodeMainDom(a).id,f="mouseoutCheck"):q.eqs(m.type,"click")&&b.check.enable&&q.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+t.id.CHECK)&&(c=q.getNodeMainDom(a).id,f="checkNode");if(0<c.length)switch(k=u.getNodeCache(b,c),f){case "checkNode":e=E;break;case "mouseoverCheck":e=w;break;case "mouseoutCheck":e=g}return{stop:"checkNode"===f,node:k,nodeEventType:f,nodeEventCallback:e,treeEventType:"",treeEventCallback:null}},!0);u.addInitRoot(function(g){u.getRoot(g).radioCheckedList=[]});u.addBeforeA(function(g,a,b){g.check.enable&&(u.makeChkFlag(g,a),b.push("\x3cspan ID\x3d'",a.tId,t.id.CHECK,"' class\x3d'",r.makeChkClass(g,a),"' treeNode",t.id.CHECK,!0===a.nocheck?" style\x3d'display:none;'":"","\x3e\x3c/span\x3e"))});u.addZTreeTools(function(g,a){a.checkNode=function(a,b,f,e){var g=this.setting.data.key.checked;!0!==a.chkDisabled&&(!0!==b&&!1!==b&&(b=!a[g]),e=!!e,a[g]===b&&!f||e&&0==q.apply(this.setting.callback.beforeCheck,[this.setting.treeId,a],!0)||!q.uCanDo(this.setting)||!this.setting.check.enable||!0===a.nocheck||(a[g]=b,b=B(a,t.id.CHECK,this.setting),(f||this.setting.check.chkStyle===t.radio.STYLE)&&r.checkNodeRelation(this.setting,a),r.setChkClass(this.setting,b,a),r.repairParentChkClassWithSelf(this.setting,a),e&&this.setting.treeObj.trigger(t.event.CHECK,[null,this.setting.treeId,a])))};a.checkAllNodes=function(a){r.repairAllChk(this.setting,!!a)};a.getCheckedNodes=function(a){var b=this.setting.data.key.children;a=!1!==a;return u.getTreeCheckedNodes(this.setting,u.getRoot(this.setting)[b],a)};a.getChangeCheckedNodes=function(){var a=this.setting.data.key.children;return u.getTreeChangeCheckedNodes(this.setting,u.getRoot(this.setting)[a])};a.setChkDisabled=function(a,b,f,e){b=!!b;f=!!f;r.repairSonChkDisabled(this.setting,a,b,!!e);r.repairParentChkDisabled(this.setting,a.getParentNode(),b,f)};var b=a.updateNode;a.updateNode=function(c,k){b&&b.apply(a,arguments);if(c&&this.setting.check.enable&&B(c,this.setting).get(0)&&q.uCanDo(this.setting)){var f=B(c,t.id.CHECK,this.setting);1!=k&&this.setting.check.chkStyle!==t.radio.STYLE||r.checkNodeRelation(this.setting,c);r.setChkClass(this.setting,f,c);r.repairParentChkClassWithSelf(this.setting,c)}}});var L=r.createNodes;r.createNodes=function(g,a,b,c){L&&L.apply(r,arguments);b&&r.repairParentChkClassWithSelf(g,c)};var J=r.removeNode;r.removeNode=function(g,a){var b=a.getParentNode();J&&J.apply(r,arguments);a&&b&&(r.repairChkClass(g,b),r.repairParentChkClass(g,b))};var K=r.appendNodes;r.appendNodes=function(g,a,b,c,k,f){var e="";K&&(e=K.apply(r,arguments));c&&u.makeChkFlag(g,c);return e}})(jQuery);(function(y){var G={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},H={onHoverOverNode:function(a,b){var c=t.getSetting(a.data.treeId),k=t.getRoot(c);if(k.curHoverNode!=b)H.onHoverOutNode(a);k.curHoverNode=b;q.addHoverDom(c,b)},onHoverOutNode:function(a,b){var c=t.getSetting(a.data.treeId),k=t.getRoot(c);k.curHoverNode&&!t.isSelectedNode(c,k.curHoverNode)&&(q.removeTreeDom(c,k.curHoverNode),k.curHoverNode=null)},onMousedownNode:function(a,b){function c(a){if(0==p.dragFlag&&Math.abs(U-a.clientX)<l.edit.drag.minMoveSize&&Math.abs(V-a.clientY)<l.edit.drag.minMoveSize)return!0;var b,c,d,e,f;f=l.data.key.children;B.css("cursor","pointer");if(0==p.dragFlag){if(0==w.apply(l.callback.beforeDrag,[l.treeId,h],!0))return k(a),!0;b=0;for(c=h.length;b<c;b++)0==b&&(p.dragNodeShowBefore=[]),d=h[b],d.isParent&&d.open?(q.expandCollapseNode(l,d,!d.open),p.dragNodeShowBefore[d.tId]=!0):p.dragNodeShowBefore[d.tId]=!1;p.dragFlag=1;n.showHoverDom=!1;w.showIfameMask(l,!0);d=!0;e=-1;if(1<h.length){var m=h[0].parentTId?h[0].getParentNode()[f]:t.getNodes(l);f=[];b=0;for(c=m.length;b<c;b++)if(void 0!==p.dragNodeShowBefore[m[b].tId]&&(d&&-1<e&&e+1!==b&&(d=!1),f.push(m[b]),e=b),h.length===f.length){h=f;break}}d&&(J=h[0].getPreNode(),K=h[h.length-1].getNextNode());O=r("\x3cul class\x3d'zTreeDragUL'\x3e\x3c/ul\x3e",l);b=0;for(c=h.length;b<c;b++)d=h[b],d.editNameFlag=!1,q.selectNode(l,d,0<b),q.removeTreeDom(l,d),b>l.edit.drag.maxShowNodeNum-1||(e=r("\x3cli id\x3d'"+d.tId+"_tmp'\x3e\x3c/li\x3e",l),e.append(r(d,g.id.A,l).clone()),e.css("padding","0"),e.children("#"+d.tId+g.id.A).removeClass(g.node.CURSELECTED),O.append(e),b==l.edit.drag.maxShowNodeNum-1&&(e=r("\x3cli id\x3d'"+d.tId+"_moretmp'\x3e\x3ca\x3e  ...  \x3c/a\x3e\x3c/li\x3e",l),O.append(e)));O.attr("id",h[0].tId+g.id.UL+"_tmp");O.addClass(l.treeObj.attr("class"));O.appendTo(B);I=r("\x3cspan class\x3d'tmpzTreeMove_arrow'\x3e\x3c/span\x3e",l);I.attr("id","zTreeMove_arrow_tmp");I.appendTo(B);l.treeObj.trigger(g.event.DRAG,[a,l.treeId,h])}if(1==p.dragFlag){z&&I.attr("id")==a.target.id&&C&&a.clientX+A.scrollLeft()+2>y("#"+C+g.id.A,z).offset().left?(d=y("#"+C+g.id.A,z),a.target=0<d.length?d.get(0):a.target):z&&(z.removeClass(g.node.TMPTARGET_TREE),C&&y("#"+C+g.id.A,z).removeClass(g.node.TMPTARGET_NODE+"_"+g.move.TYPE_PREV).removeClass(g.node.TMPTARGET_NODE+"_"+G.move.TYPE_NEXT).removeClass(g.node.TMPTARGET_NODE+"_"+G.move.TYPE_INNER));C=z=null;H=!1;v=l;d=t.getSettings();for(var x in d)d[x].treeId&&d[x].edit.enable&&d[x].treeId!=l.treeId&&(a.target.id==d[x].treeId||0<y(a.target).parents("#"+d[x].treeId).length)&&(H=!0,v=d[x]);x=A.scrollTop();e=A.scrollLeft();f=v.treeObj.offset();b=v.treeObj.get(0).scrollHeight;d=v.treeObj.get(0).scrollWidth;c=a.clientY+x-f.top;var u=v.treeObj.height()+f.top-a.clientY-x,M=a.clientX+e-f.left,E=v.treeObj.width()+f.left-a.clientX-e;f=c<l.edit.drag.borderMax&&c>l.edit.drag.borderMin;var m=u<l.edit.drag.borderMax&&u>l.edit.drag.borderMin,Q=M<l.edit.drag.borderMax&&M>l.edit.drag.borderMin,P=E<l.edit.drag.borderMax&&E>l.edit.drag.borderMin,u=c>l.edit.drag.borderMin&&u>l.edit.drag.borderMin&&M>l.edit.drag.borderMin&&E>l.edit.drag.borderMin,M=f&&0>=v.treeObj.scrollTop(),E=m&&v.treeObj.scrollTop()+v.treeObj.height()+10>=b,W=Q&&0>=v.treeObj.scrollLeft(),X=P&&v.treeObj.scrollLeft()+v.treeObj.width()+10>=d;if(a.target&&w.isChildOrSelf(a.target,v.treeId)){for(var N=a.target;N&&N.tagName&&!w.eqs(N.tagName,"li")&&N.id!=v.treeId;)N=N.parentNode;var R=!0;b=0;for(c=h.length;b<c;b++)if(d=h[b],N.id===d.tId){R=!1;break}else if(0<r(d,l).find("#"+N.id).length){R=!1;break}R&&a.target&&w.isChildOrSelf(a.target,N.id+g.id.A)&&(z=y(N),C=N.id)}d=h[0];u&&w.isChildOrSelf(a.target,v.treeId)&&(!z&&(a.target.id==v.treeId||M||E||W||X)&&(H||!H&&d.parentTId)&&(z=v.treeObj),f?v.treeObj.scrollTop(v.treeObj.scrollTop()-10):m&&v.treeObj.scrollTop(v.treeObj.scrollTop()+10),Q?v.treeObj.scrollLeft(v.treeObj.scrollLeft()-10):P&&v.treeObj.scrollLeft(v.treeObj.scrollLeft()+10),z&&z!=v.treeObj&&z.offset().left<v.treeObj.offset().left&&v.treeObj.scrollLeft(v.treeObj.scrollLeft()+z.offset().left-v.treeObj.offset().left));O.css({top:a.clientY+x+3+"px",left:a.clientX+e+3+"px"});f=b=0;if(z&&z.attr("id")!=v.treeId){var F=null==C?null:t.getNodeCache(v,C);c=(a.ctrlKey||a.metaKey)&&l.edit.drag.isMove&&l.edit.drag.isCopy||!l.edit.drag.isMove&&l.edit.drag.isCopy;b=!(!J||C!==J.tId);f=!(!K||C!==K.tId);e=d.parentTId&&d.parentTId==C;d=(c||!f)&&w.apply(v.edit.drag.prev,[v.treeId,h,F],!!v.edit.drag.prev);b=(c||!b)&&w.apply(v.edit.drag.next,[v.treeId,h,F],!!v.edit.drag.next);P=(c||!e)&&!(v.data.keep.leaf&&!F.isParent)&&w.apply(v.edit.drag.inner,[v.treeId,h,F],!!v.edit.drag.inner);if(d||b||P){c=y("#"+C+g.id.A,z);f=F.isLastNode?null:y("#"+F.getNextNode().tId+g.id.A,z.next());m=c.offset().top;e=c.offset().left;Q=d?P?.25:b?.5:1:-1;P=b?P?.75:d?.5:0:-1;x=(a.clientY+x-m)/c.height();(1==Q||x<=Q&&-.2<=x)&&d?(b=1-I.width(),f=m-I.height()/2,D=g.move.TYPE_PREV):(0==P||x>=P&&1.2>=x)&&b?(b=1-I.width(),f=null==f||F.isParent&&F.open?m+c.height()-I.height()/2:f.offset().top-I.height()/2,D=g.move.TYPE_NEXT):(b=5-I.width(),f=m,D=g.move.TYPE_INNER);I.css({display:"block",top:f+"px",left:e+b+"px"});c.addClass(g.node.TMPTARGET_NODE+"_"+D);if(L!=C||S!=D)T=(new Date).getTime();F&&F.isParent&&D==g.move.TYPE_INNER&&(x=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==F.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===F.tId&&(x=!1),x&&(window.zTreeMoveTimer=setTimeout(function(){D==g.move.TYPE_INNER&&F&&F.isParent&&!F.open&&(new Date).getTime()-T>v.edit.drag.autoOpenTime&&w.apply(v.callback.beforeDragOpen,[v.treeId,F],!0)&&(q.switchNode(v,F),v.edit.drag.autoExpandTrigger&&v.treeObj.trigger(g.event.EXPAND,[v.treeId,F]))},v.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=F.tId))}else z=null,C="",D=g.move.TYPE_INNER,I.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else D=g.move.TYPE_INNER,z&&w.apply(v.edit.drag.inner,[v.treeId,h,null],!!v.edit.drag.inner)?z.addClass(g.node.TMPTARGET_TREE):z=null,I.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);L=C;S=D;l.treeObj.trigger(g.event.DRAGMOVE,[a,l.treeId,h])}return!1}function k(a){window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);S=L=null;A.unbind("mousemove",c);A.unbind("mouseup",k);A.unbind("selectstart",f);B.css("cursor","auto");z&&(z.removeClass(g.node.TMPTARGET_TREE),C&&y("#"+C+g.id.A,z).removeClass(g.node.TMPTARGET_NODE+"_"+g.move.TYPE_PREV).removeClass(g.node.TMPTARGET_NODE+"_"+G.move.TYPE_NEXT).removeClass(g.node.TMPTARGET_NODE+"_"+G.move.TYPE_INNER));w.showIfameMask(l,!1);n.showHoverDom=!0;if(0!=p.dragFlag){p.dragFlag=0;var b,d,e;b=0;for(d=h.length;b<d;b++)e=h[b],e.isParent&&p.dragNodeShowBefore[e.tId]&&!e.open&&(q.expandCollapseNode(l,e,!e.open),delete p.dragNodeShowBefore[e.tId]);O&&O.remove();I&&I.remove();var m=(a.ctrlKey||a.metaKey)&&l.edit.drag.isMove&&l.edit.drag.isCopy||!l.edit.drag.isMove&&l.edit.drag.isCopy;!m&&z&&C&&h[0].parentTId&&C==h[0].parentTId&&D==g.move.TYPE_INNER&&(z=null);if(z){b=function(){if(H){if(!m)for(var b=0,c=h.length;b<c;b++)q.removeNode(l,h[b]);if(D==g.move.TYPE_INNER)q.addNodes(v,x,u);else if(q.addNodes(v,x.getParentNode(),u),D==g.move.TYPE_PREV)for(b=0,c=u.length;b<c;b++)q.moveNode(v,x,u[b],D,!1);else for(b=-1,c=u.length-1;b<c;c--)q.moveNode(v,x,u[c],D,!1)}else if(m&&D==g.move.TYPE_INNER)q.addNodes(v,x,u);else if(m&&q.addNodes(v,x.getParentNode(),u),D!=g.move.TYPE_NEXT)for(b=0,c=u.length;b<c;b++)q.moveNode(v,x,u[b],D,!1);else for(b=-1,c=u.length-1;b<c;c--)q.moveNode(v,x,u[c],D,!1);q.selectNodes(v,u);r(u[0],l).focus().blur();l.treeObj.trigger(g.event.DROP,[a,v.treeId,u,x,D,m])};var x=null==C?null:t.getNodeCache(v,C);if(0==w.apply(l.callback.beforeDrop,[v.treeId,h,x,D,m],!0))q.selectNodes(E,h);else{var u=m?w.clone(h):h;D==g.move.TYPE_INNER&&w.canAsync(v,x)?q.asyncNode(v,x,!1,b):b()}}else q.selectNodes(E,h),l.treeObj.trigger(g.event.DROP,[a,l.treeId,h,null,null,null])}}function f(){return!1}var e,m,l=t.getSetting(a.data.treeId),p=t.getRoot(l),n=t.getRoots();if(2==a.button||!l.edit.enable||!l.edit.drag.isCopy&&!l.edit.drag.isMove)return!0;var d=a.target,u=t.getRoot(l).curSelectedList,h=[];if(t.isSelectedNode(l,b))for(e=0,m=u.length;e<m;e++){if(u[e].editNameFlag&&w.eqs(d.tagName,"input")&&null!==d.getAttribute("treeNode"+g.id.INPUT))return!0;h.push(u[e]);if(h[0].parentTId!==u[e].parentTId){h=[b];break}}else h=[b];q.editNodeBlur=!0;q.cancelCurEditNode(l);var A=y(l.treeObj.get(0).ownerDocument),B=y(l.treeObj.get(0).ownerDocument.body),O,I,z,H=!1,v=l,E=l,J,K,L=null,S=null,C=null,D=g.move.TYPE_INNER,U=a.clientX,V=a.clientY,T=(new Date).getTime();w.uCanDo(l)&&A.bind("mousemove",c);A.bind("mouseup",k);A.bind("selectstart",f);a.preventDefault&&a.preventDefault();return!0}};y.extend(!0,y.fn.zTree.consts,G);y.extend(!0,y.fn.zTree._z,{tools:{getAbs:function(a){a=a.getBoundingClientRect();return[a.left+(document.body.scrollLeft+document.documentElement.scrollLeft),a.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(a){a.get(0)&&(a.focus(),w.setCursorPosition(a.get(0),a.val().length))},inputSelect:function(a){a.get(0)&&(a.focus(),a.select())},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",b);c.select()}},showIfameMask:function(a,b){for(var c=t.getRoot(a);0<c.dragMaskList.length;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(b)for(var k=r("iframe",a),f=0,e=k.length;f<e;f++){var g=k.get(f),l=w.getAbs(g),g=r("\x3cdiv id\x3d'zTreeMask_"+f+"' class\x3d'zTreeMask' style\x3d'top:"+l[1]+"px; left:"+l[0]+"px; width:"+g.offsetWidth+"px; height:"+g.offsetHeight+"px;'\x3e\x3c/div\x3e",a);g.appendTo(r("body",a));c.dragMaskList.push(g)}}},view:{addEditBtn:function(a,b){if(!(b.editNameFlag||0<r(b,g.id.EDIT,a).length)&&w.apply(a.edit.showRenameBtn,[a.treeId,b],a.edit.showRenameBtn)){var c=r(b,g.id.A,a),k="\x3cspan class\x3d'"+g.className.BUTTON+" edit' id\x3d'"+b.tId+g.id.EDIT+"' title\x3d'"+w.apply(a.edit.renameTitle,[a.treeId,b],a.edit.renameTitle)+"' treeNode"+g.id.EDIT+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(k);r(b,g.id.EDIT,a).bind("click",function(){if(!w.uCanDo(a)||0==w.apply(a.callback.beforeEditName,[a.treeId,b],!0))return!1;q.editNode(a,b);return!1}).show()}},addRemoveBtn:function(a,b){if(!(b.editNameFlag||0<r(b,g.id.REMOVE,a).length)&&w.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){var c=r(b,g.id.A,a),k="\x3cspan class\x3d'"+g.className.BUTTON+" remove' id\x3d'"+b.tId+g.id.REMOVE+"' title\x3d'"+w.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+g.id.REMOVE+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(k);r(b,g.id.REMOVE,a).bind("click",function(){if(!w.uCanDo(a)||0==w.apply(a.callback.beforeRemove,[a.treeId,b],!0))return!1;q.removeNode(a,b);a.treeObj.trigger(g.event.REMOVE,[a.treeId,b]);return!1}).bind("mousedown",function(a){return!0}).show()}},addHoverDom:function(a,b){t.getRoots().showHoverDom&&(b.isHover=!0,a.edit.enable&&(q.addEditBtn(a,b),q.addRemoveBtn(a,b)),w.apply(a.view.addHoverDom,[a.treeId,b]))},cancelCurEditNode:function(a,b,c){var k=t.getRoot(a),f=a.data.key.name,e=k.curEditNode;if(e){var m=k.curEditInput;b=b?b:c?e[f]:m.val();if(!1===w.apply(a.callback.beforeRename,[a.treeId,e,b,c],!0))return!1;e[f]=b;a.treeObj.trigger(g.event.RENAME,[a.treeId,e,c]);r(e,g.id.A,a).removeClass(g.node.CURSELECTED_EDIT);m.unbind();q.setNodeName(a,e);e.editNameFlag=!1;k.curEditNode=null;k.curEditInput=null;q.selectNode(a,e,!1)}return k.noSelection=!0},editNode:function(a,b){var c=t.getRoot(a);q.editNodeBlur=!1;if(t.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag)setTimeout(function(){w.inputFocus(c.curEditInput)},0);else{var k=a.data.key.name;b.editNameFlag=!0;q.removeTreeDom(a,b);q.cancelCurEditNode(a);q.selectNode(a,b,!1);r(b,g.id.SPAN,a).html("\x3cinput type\x3dtext class\x3d'rename' id\x3d'"+b.tId+g.id.INPUT+"' treeNode"+g.id.INPUT+" \x3e");var f=r(b,g.id.INPUT,a);f.attr("value",b[k]);a.edit.editNameSelectAll?w.inputSelect(f):w.inputFocus(f);f.bind("blur",function(b){q.editNodeBlur||q.cancelCurEditNode(a)}).bind("keydown",function(b){"13"==b.keyCode?(q.editNodeBlur=!0,q.cancelCurEditNode(a)):"27"==b.keyCode&&q.cancelCurEditNode(a,null,!0)}).bind("click",function(a){return!1}).bind("dblclick",function(a){return!1});r(b,g.id.A,a).addClass(g.node.CURSELECTED_EDIT);c.curEditInput=f;c.noSelection=!1;c.curEditNode=b}},moveNode:function(a,b,c,k,f,e){var m=t.getRoot(a),l=a.data.key.children;if(b!=c&&(!a.data.keep.leaf||!b||b.isParent||k!=g.move.TYPE_INNER)){var p=c.parentTId?c.getParentNode():m,n=null===b||b==m;n&&null===b&&(b=m);n&&(k=g.move.TYPE_INNER);m=b.parentTId?b.getParentNode():m;k!=g.move.TYPE_PREV&&k!=g.move.TYPE_NEXT&&(k=g.move.TYPE_INNER);k==g.move.TYPE_INNER&&(n?c.parentTId=null:(b.isParent||(b.isParent=!0,b.open=!!b.open,q.setNodeLineIcos(a,b)),c.parentTId=b.tId));var d;n?d=n=a.treeObj:(e||k!=g.move.TYPE_INNER?e||q.expandCollapseNode(a,b.getParentNode(),!0,!1):q.expandCollapseNode(a,b,!0,!1),n=r(b,a),d=r(b,g.id.UL,a),n.get(0)&&!d.get(0)&&(d=[],q.makeUlHtml(a,b,d,""),n.append(d.join(""))),d=r(b,g.id.UL,a));var u=r(c,a);u.get(0)?n.get(0)||u.remove():u=q.appendNodes(a,c.level,[c],null,!1,!0).join("");d.get(0)&&k==g.move.TYPE_INNER?d.append(u):n.get(0)&&k==g.move.TYPE_PREV?n.before(u):n.get(0)&&k==g.move.TYPE_NEXT&&n.after(u);var h=-1,w=0,y=null,n=null,B=c.level;if(c.isFirstNode)h=0,1<p[l].length&&(y=p[l][1],y.isFirstNode=!0);else if(c.isLastNode)h=p[l].length-1,y=p[l][h-1],y.isLastNode=!0;else for(d=0,u=p[l].length;d<u;d++)if(p[l][d].tId==c.tId){h=d;break}0<=h&&p[l].splice(h,1);if(k!=g.move.TYPE_INNER)for(d=0,u=m[l].length;d<u;d++)m[l][d].tId==b.tId&&(w=d);k==g.move.TYPE_INNER?(b[l]||(b[l]=[]),0<b[l].length&&(n=b[l][b[l].length-1],n.isLastNode=!1),b[l].splice(b[l].length,0,c),c.isLastNode=!0,c.isFirstNode=1==b[l].length):b.isFirstNode&&k==g.move.TYPE_PREV?(m[l].splice(w,0,c),n=b,n.isFirstNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!0,c.isLastNode=!1):b.isLastNode&&k==g.move.TYPE_NEXT?(m[l].splice(w+1,0,c),n=b,n.isLastNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(k==g.move.TYPE_PREV?m[l].splice(w,0,c):m[l].splice(w+1,0,c),c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!1);t.fixPIdKeyValue(a,c);t.setSonNodeLevel(a,c.getParentNode(),c);q.setNodeLineIcos(a,c);q.repairNodeLevelClass(a,c,B);!a.data.keep.parent&&1>p[l].length?(p.isParent=!1,p.open=!1,b=r(p,g.id.UL,a),k=r(p,g.id.SWITCH,a),l=r(p,g.id.ICON,a),q.replaceSwitchClass(p,k,g.folder.DOCU),q.replaceIcoClass(p,l,g.folder.DOCU),b.css("display","none")):y&&q.setNodeLineIcos(a,y);n&&q.setNodeLineIcos(a,n);a.check&&a.check.enable&&q.repairChkClass&&(q.repairChkClass(a,p),q.repairParentChkClassWithSelf(a,p),p!=c.parent&&q.repairParentChkClassWithSelf(a,c));e||q.expandCollapseParentNode(a,c.getParentNode(),!0,f)}},removeEditBtn:function(a,b){r(b,g.id.EDIT,a).unbind().remove()},removeRemoveBtn:function(a,b){r(b,g.id.REMOVE,a).unbind().remove()},removeTreeDom:function(a,b){b.isHover=!1;q.removeEditBtn(a,b);q.removeRemoveBtn(a,b);w.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(a,b,c){if(c!==b.level){var k=r(b,a),f=r(b,g.id.A,a);a=r(b,g.id.UL,a);c=g.className.LEVEL+c;b=g.className.LEVEL+b.level;k.removeClass(c);k.addClass(b);f.removeClass(c);f.addClass(b);a.removeClass(c);a.addClass(b)}},selectNodes:function(a,b){for(var c=0,k=b.length;c<k;c++)q.selectNode(a,b[c],0<c)}},event:{},data:{setSonNodeLevel:function(a,b,c){if(c){var k=a.data.key.children;c.level=b?b.level+1:0;if(c[k]){b=0;for(var f=c[k].length;b<f;b++)c[k][b]&&t.setSonNodeLevel(a,c,c[k][b])}}}}});var E=y.fn.zTree,w=E._z.tools,g=E.consts,q=E._z.view,t=E._z.data,r=w.$;t.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}});t.addInitBind(function(a){var b=a.treeObj,c=g.event;b.bind(c.RENAME,function(b,c,e,g){w.apply(a.callback.onRename,[b,c,e,g])});b.bind(c.DRAG,function(b,c,e,g){w.apply(a.callback.onDrag,[c,e,g])});b.bind(c.DRAGMOVE,function(b,c,e,g){w.apply(a.callback.onDragMove,[c,e,g])});b.bind(c.DROP,function(b,c,e,g,l,m,n){w.apply(a.callback.onDrop,[c,e,g,l,m,n])})});t.addInitUnBind(function(a){a=a.treeObj;var b=g.event;a.unbind(b.RENAME);a.unbind(b.DRAG);a.unbind(b.DRAGMOVE);a.unbind(b.DROP)});t.addInitCache(function(a){});t.addInitNode(function(a,b,c,k,f,e,g){c&&(c.isHover=!1,c.editNameFlag=!1)});t.addInitProxy(function(a){var b=a.target,c=t.getSetting(a.data.treeId),k=a.relatedTarget,f="",e=null,m="",l=null,p=null;if(w.eqs(a.type,"mouseover")){if(p=w.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+g.id.A}]))f=w.getNodeMainDom(p).id,m="hoverOverNode"}else w.eqs(a.type,"mouseout")?(p=w.getMDom(c,k,[{tagName:"a",attrName:"treeNode"+g.id.A}]),p||(f="remove",m="hoverOutNode")):w.eqs(a.type,"mousedown")&&(p=w.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+g.id.A}]))&&(f=w.getNodeMainDom(p).id,m="mousedownNode");if(0<f.length)switch(e=t.getNodeCache(c,f),m){case "mousedownNode":l=H.onMousedownNode;break;case "hoverOverNode":l=H.onHoverOverNode;break;case "hoverOutNode":l=H.onHoverOutNode}return{stop:!1,node:e,nodeEventType:m,nodeEventCallback:l,treeEventType:"",treeEventCallback:null}});t.addInitRoot(function(a){a=t.getRoot(a);var b=t.getRoots();a.curEditNode=null;a.curEditInput=null;a.curHoverNode=null;a.dragFlag=0;a.dragNodeShowBefore=[];a.dragMaskList=[];b.showHoverDom=!0});t.addZTreeTools(function(a,b){b.cancelEditName=function(a){t.getRoot(this.setting).curEditNode&&q.cancelCurEditNode(this.setting,a?a:null,!0)};b.copyNode=function(a,b,f,e){if(!b||a&&!a.isParent&&this.setting.data.keep.leaf&&f===g.move.TYPE_INNER)return null;var m=this,l=w.clone(b);a||(a=null,f=g.move.TYPE_INNER);f==g.move.TYPE_INNER?(b=function(){q.addNodes(m.setting,a,[l],e)},w.canAsync(this.setting,a)?q.asyncNode(this.setting,a,e,b):b()):(q.addNodes(this.setting,a.parentNode,[l],e),q.moveNode(this.setting,a,l,f,!1,e));return l};b.editName=function(a){a&&a.tId&&a===t.getNodeCache(this.setting,a.tId)&&(a.parentTId&&q.expandCollapseParentNode(this.setting,a.getParentNode(),!0),q.editNode(this.setting,a))};b.moveNode=function(a,b,f,e){function m(){q.moveNode(l.setting,a,b,f,!1,e)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&f===g.move.TYPE_INNER||a&&(b.parentTId==a.tId&&f==g.move.TYPE_INNER||0<r(b,this.setting).find("#"+a.tId).length))return null;a||(a=null);var l=this;w.canAsync(this.setting,a)&&f===g.move.TYPE_INNER?q.asyncNode(this.setting,a,e,m):m();return b};b.setEditable=function(a){this.setting.edit.enable=a;return this.refresh()}});var u=q.cancelPreSelectedNode;q.cancelPreSelectedNode=function(a,b){for(var c=t.getRoot(a).curSelectedList,g=0,f=c.length;g<f;g++)if(!b||b===c[g])if(q.removeTreeDom(a,c[g]),b)break;u&&u.apply(q,arguments)};var B=q.createNodes;q.createNodes=function(a,b,c,g){B&&B.apply(q,arguments);c&&q.repairParentChkClassWithSelf&&q.repairParentChkClassWithSelf(a,g)};var L=q.makeNodeUrl;q.makeNodeUrl=function(a,b){return a.edit.enable?null:L.apply(q,arguments)};var J=q.removeNode;q.removeNode=function(a,b){var c=t.getRoot(a);c.curEditNode===b&&(c.curEditNode=null);J&&J.apply(q,arguments)};var K=q.selectNode;q.selectNode=function(a,b,c){var g=t.getRoot(a);if(t.isSelectedNode(a,b)&&g.curEditNode==b&&b.editNameFlag)return!1;K&&K.apply(q,arguments);q.addHoverDom(a,b);return!0};var m=w.uCanDo;w.uCanDo=function(a,b){var c=t.getRoot(a);if(b&&(w.eqs(b.type,"mouseover")||w.eqs(b.type,"mouseout")||w.eqs(b.type,"mousedown")||w.eqs(b.type,"mouseup")))return!0;c.curEditNode&&(q.editNodeBlur=!1,c.curEditInput.focus());return!c.curEditNode&&(m?m.apply(q,arguments):!0)}})(jQuery);